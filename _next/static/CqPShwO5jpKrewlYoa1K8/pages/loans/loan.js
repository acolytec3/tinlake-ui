(window.webpackJsonp=window.webpackJsonp||[]).push([["9615"],{"0se9":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loans/loan",function(){var e=a("qK8O");return{page:e.default||e}}])},"8kid":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),l=a("jCe7");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var i=function(e){return r.a.createElement(l.a,o({viewBox:"0 0 24 24",a11yTitle:"LinkPrevious"},e),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M2,12 L22,12 M13,3 L22,12 L13,21",transform:"matrix(-1 0 0 1 24 0)"}))},c=a("YFqc"),s=a.n(c);a.d(t,"a",function(){return u});var u=function(e){return r.a.createElement(s.a,{href:e.href},r.a.createElement(i,{style:{cursor:"pointer"}}))}},Bodc:function(e,t,a){"use strict";var n=a("rt45"),r=a("q1tI"),l=a.n(r);function o(){var e=Object(n.a)(["\n  display: inline-block;\n  padding: 2px 6px;\n  border-radius: 20px;\n  border: 1px solid #808080;\n  line-height: 12px;\n  font-size: 12px;\n  color: #808080;\n"]);return o=function(){return e},e}var i=a("vOnD").default.div(o());t.a=function(e){return l.a.createElement(i,e,e.text)}},"H/fR":function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return c});var n=a("OZ/i"),r=a.n(n),l=a("UIRo").a.etherscanUrl,o=function(e){return"".concat(l,"/address/").concat(e)},i=function(e,t){return"".concat(l,"/token/").concat(t,"?a=").concat(e)},c=function(e){return new r.a(e.replace(/^0x/,""),16).toString()}},Ks3v:function(e,t,a){"use strict";a.d(t,"a",function(){return k});var n=a("q1tI"),r=a.n(n),l=a("vOnD"),o=a("bkVA"),i=a("otPn"),c=a("463D"),s=a("XDYV"),u=a("shMu");function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var m={theme:{global:{colors:{icon:"#666666"}},icon:{size:{small:"12px",medium:"24px",large:"48px",xlarge:"96px"}}}},f=function(e,t,a,n){return Object(l.css)(["",":",";"],e,function e(t,a){var n=a.global.colors[t]||t,r=n;return a.dark&&n.dark?r=n.dark:!a.dark&&n.light&&(r=n.light),r&&a.global.colors[r]&&a.global.colors[r]!==r&&(r=e(r,a)),r}(t,a))};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var h=Object(l.css)([""," ",' g{fill:inherit;stroke:inherit;}*:not([stroke]){&[fill="none"]{stroke-width:0;}}*[stroke*="#"],*[STROKE*="#"]{stroke:inherit;fill:none;}*[fill-rule],*[FILL-RULE],*[fill*="#"],*[FILL*="#"]{fill:inherit;stroke:none;}'],function(e){return f("fill",e.color||e.theme.global.colors.icon,e.theme)},function(e){return f("stroke",e.color||e.theme.global.colors.icon,e.theme)}),g=function(e){var t=e.a11yTitle,a=(e.color,e.size,e.theme,function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["a11yTitle","color","size","theme"]));return r.a.createElement("svg",b({"aria-label":t},a))};g.displayName="Icon";var v=Object(l.default)(g).withConfig({displayName:"StyledIcon",componentId:"ofa7kd-0"})(["display:inline-block;flex:0 0 auto;"," "," ",""],function(e){var t=e.size,a=void 0===t?"medium":t,n=e.theme;return"\n    width: "+(n.icon.size[a]||a)+";\n    height: "+(n.icon.size[a]||a)+";\n  "},function(e){return"plain"!==e.color&&h},function(e){var t=e.theme;return t&&t.icon.extend});function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}v.defaultProps={},Object.setPrototypeOf(v.defaultProps,m);var O=Object(l.default)(i.a).withConfig({displayName:"DisplayField__DisplayFieldBox",componentId:"lfek92-0"})(["&{padding:2px 0px;.display_field_text{overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis;}.display_field_text:after{content:'';display:inline-block;}a,a:hover{text-decoration:none;}a.display_field_anchor{overflow:hidden;}a.icon_anchor{svg{vertical-align:middle;}}}",""],function(e){return e.theme.displayField&&e.theme.displayField.extend}),E=Object(l.default)(i.a).withConfig({displayName:"DisplayField__LabelBox",componentId:"lfek92-1"})([""]),j=function(e){var t=e.value,a=e.valueToCopy,n=e.link,l=e.label,o=e.as,d=void 0===o?"p":o,m=e.copy,f=e.theme.displayField,b=f.labelBox,h=f.labelText,g=f.anchor,v=f.icons;return r.a.createElement(O,null,r.a.createElement(function(e){var t=e.label,a=e.children;return t?r.a.createElement(E,b,r.a.createElement(s.a,p({},h,{as:"label"}),t),a):a},{label:l},r.a.createElement(function(e){var n=e.children;return m?r.a.createElement(i.a,{direction:"row",align:"center",gap:"xsmall"},n,r.a.createElement(c.a,{className:"icon_anchor",onClick:function(){Object(u.a)(a||t)},title:"Copy to clipboard"},r.a.createElement(v.copy,{size:v.size}))):n},null,r.a.createElement(function(e){var t=e.link,a=e.children;return t?r.a.createElement(c.a,p({className:"display_field_anchor"},g,"string"==typeof t?{href:t}:t),a):a},{link:n},r.a.createElement(s.a,{as:d,className:"display_field_text"},t)))))},w={displayField:{labelBox:{border:{side:"bottom",color:"light-4"}},anchor:{color:"brand"},icons:{copy:function(e){return r.a.createElement(v,y({viewBox:"0 0 24 24",a11yTitle:"Copy"},e),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M9,15 L17,15 L9,15 Z M9,11 L19,11 L9,11 Z M9,7 L13,7 L9,7 Z M16,1 L16,7 L22,7 M6,5 L2,5 L2,23 L18,23 L18,19 M22,19 L6,19 L6,1 L17,1 L22,6 L22,19 L22,19 Z"}))},size:"small"}}};Object(o.extendDefaultTheme)(w),j.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){d(e,t,a[t])})}return e}({},o.defaultProps);var k=Object(l.withTheme)(j)},YwDK:function(e,t,a){"use strict";var n=a("rt45"),r=a("0iUn"),l=a("sLSF"),o=a("MI3g"),i=a("a7VT"),c=a("Tit0"),s=a("q1tI"),u=a("ACV0"),d=a("otPn"),p=a("vOnD"),m=a("Bodc"),f=a("Ks3v"),b=a("H/fR"),h=a("1OXE");function g(){var e=Object(n.a)(["\n  margin: 56px 0;\n  padding: 20px;\n  border-radius: 3px;\n  background: #f7f7f7;\n"]);return g=function(){return e},e}var v=function(e){function t(){return Object(r.default)(this,t),Object(o.default)(this,Object(i.default)(t).apply(this,arguments))}return Object(c.default)(t,e),Object(l.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=t.registry,n=t.tokenId,r=t.nftOwner,l=e.authedAddr;return s.createElement(y,null,s.createElement(u.a,{level:"5",margin:"none"},"NFT Data"),s.createElement(d.a,{direction:"row",gap:"medium",margin:{bottom:"large",top:"medium"}},s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT ID",copy:!0,as:"span",value:Object(b.c)(Object(h.b)(n).toString()),link:{href:Object(b.b)(Object(b.c)(Object(h.b)(n).toString()),a),target:"_blank"}})),s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT registry",copy:!0,as:"span",value:a,link:{href:Object(b.a)(a),target:"_blank"}})),s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT Owner",copy:!0,as:"span",value:r,link:{href:Object(b.a)(r),target:"_blank"}}),l===r&&s.createElement(m.a,{text:"Me",style:{position:"absolute",left:100,top:32}}))),s.createElement(d.a,{direction:"row",gap:"medium",margin:{bottom:"small",top:"medium"}}))}}]),t}(s.Component);t.a=v;var y=Object(p.default)(d.a)(g())},ZryU:function(e,t,a){"use strict";var n=a("0iUn"),r=a("sLSF"),l=a("MI3g"),o=a("a7VT"),i=a("Tit0"),c=a("q1tI"),s=a("xy4l"),u=a("otPn"),d=a("ACV0"),p=a("/MKj"),m=a("5vTU"),f=a("IIBO"),b=a("P3Am"),h=a("1OXE"),g=a("hGzJ"),v=a("gTk/"),y=a("J2ZV"),O=function(e){function t(){return Object(n.default)(this,t),Object(l.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(i.default)(t,e),Object(r.default)(t,[{key:"render",value:function(){var e=this.props.loan,t=e.loanId,a=e.debt,n=e.principal,r=e.interestRate,l=e.status;return c.createElement(u.a,null,c.createElement(u.a,{direction:"row",gap:"medium"},c.createElement(f.a,{label:"Loan ID"},c.createElement(b.a,{value:t,disabled:!0})),c.createElement(f.a,{label:"Status"},c.createElement(b.a,{value:l,disabled:!0}))),c.createElement(u.a,{direction:"row",gap:"medium",margin:{bottom:"medium",top:"large"}},c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Maximum borrow amount"},c.createElement(v.a,{value:n.toString(),tokenData:y,precision:12}))),c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Debt"},c.createElement(v.a,{value:a.toString(),tokenData:y,precision:12}))),c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Interest rate"},c.createElement(g.a,{value:Object(h.e)(r),suffix:"%",disabled:!0})))))}}]),t}(c.Component),E=a("ln6h"),j=a.n(E),w=a("O40h"),k=a("AT/M"),x=a("vYYK"),L=a("T1Te"),I=a("XDYV"),P=a("9UR+"),M=a("r6I4"),T=a("go9o"),S=a("+i6/"),A=a("OZ/i"),R=a.n(A),_=function(e){function t(){var e,a;Object(n.default)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=Object(l.default)(this,(e=Object(o.default)(t)).call.apply(e,[this].concat(i))),Object(x.a)(Object(k.default)(a),"borrow",Object(w.default)(j.a.mark(function e(){var t,n,r,l,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.transactionSubmitted&&a.props.transactionSubmitted("Borrowing initiated. Please confirm the pending transactions in MetaMask. Processing may take a few seconds."),e.prev=1,e.next=4,Object(S.a)();case 4:return t=a.state.borrowAmount,n=a.props,r=n.loan,l=n.tinlake,e.next=8,Object(P.a)(l,r,t);case 8:if(!(o=e.sent)||!o.errorMsg){e.next=12;break}return a.props.responseReceived&&a.props.responseReceived(null,"Borrowing failed. ".concat(o.errorMsg)),e.abrupt("return");case 12:a.props.responseReceived&&a.props.responseReceived("Borrowing successful. Please check your wallet.",null),a.props.loadLoan&&a.props.loadLoan(l,r.loanId),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),a.props.responseReceived&&a.props.responseReceived(null,"Borrowing failed. ".concat(e.t0)),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))),a}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.loan,a=e.tinlake,n=e.loadAnalyticsData;this.setState({borrowAmount:t.principal||"0"}),n&&n(a)}},{key:"render",value:function(){var e=this,t=this.state.borrowAmount,a=this.props,n=a.loan,r=a.analytics,l="0"!==n.principal.toString(),o=r&&r.data&&r.data.availableFunds||"0",i=new R.a(t).cmp(new R.a(n.principal))>0,s=new R.a(t).cmp(new R.a(o))>0,d=!i&&!s&&l;return c.createElement(u.a,{basis:"1/4",gap:"medium",margin:{right:"large"}},c.createElement(u.a,{gap:"medium"},c.createElement(f.a,{label:"Borrow amount"},c.createElement(g.a,{value:Object(h.a)(t,18),suffix:" DAI",precision:18,onValueChange:function(t){var a=t.value;return e.setState({borrowAmount:Object(h.d)(a,18)})}}))),c.createElement(u.a,{align:"start"},c.createElement(L.a,{onClick:this.borrow,primary:!0,label:"Borrow",disabled:!d}),s&&c.createElement(u.a,{margin:{top:"small"}},"Available funds exceeded. ",c.createElement("br",null),"Amount has to be lower then ",c.createElement("br",null),c.createElement(I.a,{weight:"bold"},"".concat(Object(h.a)(o,18)))),i&&!s&&c.createElement(u.a,{margin:{top:"small"}},"Max borrow amount exceeded.   ",c.createElement("br",null),"Amount has to be lower then ",c.createElement("br",null),c.createElement(I.a,{weight:"bold"},"".concat(Object(h.a)(n.principal,18))))))}}]),t}(c.Component),D=Object(p.b)(function(e){return e},{loadLoan:s.b,transactionSubmitted:M.d,responseReceived:M.c,loadAnalyticsData:T.b})(_),C=function(e){function t(){var e,a;Object(n.default)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=Object(l.default)(this,(e=Object(o.default)(t)).call.apply(e,[this].concat(i))),Object(x.a)(Object(k.default)(a),"repay",Object(w.default)(j.a.mark(function e(){var t,n,r,l,o,i,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(S.a)();case 3:return a.state.repayAmount,t=a.props,n=t.transactionSubmitted,r=t.responseReceived,l=t.loadLoan,o=t.loan,i=t.tinlake,n&&n("Repayment initiated. Please confirm the pending transactions in MetaMask. Processing may take a few seconds."),e.next=8,Object(P.h)(i,o);case 8:if(!(c=e.sent)||!c.errorMsg){e.next=12;break}return r&&r(null,"Repayment failed. ".concat(c.errorMsg)),e.abrupt("return");case 12:r&&r("Repayment successful. Please check your wallet.",null),l&&l(i,o.loanId),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),M.c&&Object(M.c)(null,"Repayment failed. ".concat(e.t0)),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[0,16]])}))),a}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.loan;this.setState({repayAmount:e.debt||"0"})}},{key:"render",value:function(){var e=this,t=this.state.repayAmount,a="0"!==this.props.loan.debt.toString();return c.createElement(u.a,{basis:"1/4",gap:"medium",margin:{right:"large"}},c.createElement(u.a,{gap:"medium"},c.createElement(f.a,{label:"Repay amount"},c.createElement(g.a,{value:Object(h.a)(t,18),suffix:" DAI",precision:18,onValueChange:function(t){var a=t.value;return e.setState({repayAmount:Object(h.d)(a)})},disabled:!0}))),c.createElement(u.a,{align:"start"},c.createElement(L.a,{onClick:this.repay,primary:!0,label:"Repay",disabled:!a})))}}]),t}(c.Component),F=Object(p.b)(function(e){return e},{loadLoan:s.b,transactionSubmitted:M.d,responseReceived:M.c})(C),B=a("02fx"),N=a("YwDK"),U=a("2PWv"),z=function(e){function t(){return Object(n.default)(this,t),Object(l.default)(this,Object(o.default)(t).apply(this,arguments))}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tinlake,a=e.loanId,n=e.loadLoan,r=e.resetTransactionState,l=e.loadUserProxies;a&&n(t,a),r&&r(),l&&l()}},{key:"componentWillUnmount",value:function(){this.props.resetTransactionState&&this.props.resetTransactionState()}},{key:"render",value:function(){var e=this.props,t=e.loans,a=e.loanId,n=e.tinlake,r=e.auth,l=e.transactions,o=t,i=o.loan,s=o.loanState;if(null===s||"loading"===s)return null;if("not found"===s)return c.createElement(m.a,{margin:"medium",type:"error"},"Could not find loan ",a);var p=r&&r.user,f=(p&&p.permissions.canSetInterestRate,p&&i&&p.proxies.includes(i.ownerOf));return l&&l.transactionState&&"processing"===l.transactionState?c.createElement(B.a,{height:"calc(100vh - 89px - 84px)",message:l.loadingMessage||"Processing Transaction. This may take a few seconds. Please wait..."}):c.createElement(u.a,null,l&&l.successMessage&&c.createElement(u.a,{margin:{bottom:"large"}},c.createElement(m.a,{type:"success"},l.successMessage," ")),l&&l.errorMessage&&c.createElement(u.a,{margin:{bottom:"large"}},c.createElement(m.a,{type:"error"},l.errorMessage)),c.createElement(O,{loan:i}),i&&"closed"!==i.status&&c.createElement(u.a,null,f&&c.createElement(u.a,{margin:{top:"large",bottom:"large"}},c.createElement(u.a,{gap:"medium",align:"start",margin:{bottom:"medium"}},c.createElement(d.a,{level:"5",margin:"none"},"Borrow / Repay ")),c.createElement(u.a,{direction:"row"},c.createElement(D,{loan:i,tinlake:n}," "),c.createElement(F,{loan:i,tinlake:n}," ")))),i&&i.nft&&c.createElement(N.a,{data:i.nft,authedAddr:n.ethConfig.from}))}}]),t}(c.Component);t.a=Object(p.b)(function(e){return e},{loadLoan:s.b,resetTransactionState:M.b,loadUserProxies:U.d})(z)},qK8O:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),r=a.n(n),l=a("O40h"),o=a("0iUn"),i=a("sLSF"),c=a("MI3g"),s=a("a7VT"),u=a("Tit0"),d=a("q1tI"),p=a("2+e4"),m=a("ZryU"),f=a("otPn"),b=a("ACV0"),h=a("Gb8u"),g=a("xJFt"),v=a("vnk9"),y=a("8kid"),O=a("wZwN"),E=a("5vTU"),j=function(e){function t(){return Object(o.default)(this,t),Object(c.default)(this,Object(s.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(i.default)(t,[{key:"render",value:function(){var e=this.props.loanId;return d.createElement(f.a,{align:"center",pad:{horizontal:"small"}},d.createElement(h.a,{selectedRoute:"/loans/loan",menuItems:v.a}),d.createElement(f.a,{justify:"center",direction:"row"},d.createElement(f.a,{width:"xlarge"},d.createElement(g.a,null,d.createElement(f.a,{direction:"row",gap:"small",align:"center"},d.createElement(y.a,{href:"/loans"}),d.createElement(b.a,{level:"3"},"Loan Details"))),d.createElement(p.a,{render:function(t){return d.createElement(O.a,{tinlake:t,waitForAuthentication:!0,waitForAuthorization:!0,render:function(a){return a&&"loaded"===a.state&&a.user?d.createElement(f.a,null," ",e&&d.createElement(m.a,{auth:a,tinlake:t,loanId:e})," "):d.createElement(E.a,{margin:"medium",type:"error"},"Please authenticate to access this page ")}})}}))))}}],[{key:"getInitialProps",value:function(){var e=Object(l.default)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,e.abrupt("return",{loanId:a.loanId});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(d.Component);t.default=j}},[["0se9","5d41","9da1"]]]);