(window.webpackJsonp=window.webpackJsonp||[]).push([["374e"],{"8kid":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),o=a("jCe7");function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var i=function(e){return r.a.createElement(o.a,l({viewBox:"0 0 24 24",a11yTitle:"LinkPrevious"},e),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M2,12 L22,12 M13,3 L22,12 L13,21",transform:"matrix(-1 0 0 1 24 0)"}))},c=a("YFqc"),s=a.n(c);a.d(t,"a",function(){return u});var u=function(e){return r.a.createElement(s.a,{href:e.href},r.a.createElement(i,{style:{cursor:"pointer"}}))}},Bodc:function(e,t,a){"use strict";var n=a("rt45"),r=a("q1tI"),o=a.n(r);function l(){var e=Object(n.a)(["\n  display: inline-block;\n  padding: 2px 6px;\n  border-radius: 20px;\n  border: 1px solid #808080;\n  line-height: 12px;\n  font-size: 12px;\n  color: #808080;\n"]);return l=function(){return e},e}var i=a("vOnD").default.div(l());t.a=function(e){return o.a.createElement(i,e,e.text)}},Dwci:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loans/issue",function(){var e=a("HhpZ");return{page:e.default||e}}])},"H/fR":function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return c});var n=a("OZ/i"),r=a.n(n),o=a("UIRo").a.etherscanUrl,l=function(e){return"".concat(o,"/address/").concat(e)},i=function(e,t){return"".concat(o,"/token/").concat(t,"?a=").concat(e)},c=function(e){return new r.a(e.replace(/^0x/,""),16).toString()}},HhpZ:function(e,t,a){"use strict";a.r(t);var n=a("ln6h"),r=a.n(n),o=a("O40h"),l=a("0iUn"),i=a("sLSF"),c=a("MI3g"),s=a("a7VT"),u=a("Tit0"),d=a("q1tI"),p=a("2+e4"),m=a("AT/M"),f=a("vYYK"),b=a("otPn"),g=a("XDYV"),h=a("IIBO"),v=a("P3Am"),y=a("T1Te"),E=a("5vTU"),O=a("YwDK"),k=a("/MKj"),j=a("9UR+"),w=a("+i6/"),x=a("02fx"),I=a("ZryU"),T=a("2PWv"),M=function(e){function t(){var e,a;Object(l.default)(this,t);for(var n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return a=Object(c.default)(this,(e=Object(s.default)(t)).call.apply(e,[this].concat(i))),Object(f.a)(Object(m.default)(a),"onTokenIdValueChange",function(){var e=Object(o.default)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.value,e.next=3,a.setState({tokenId:n,nft:null,nftError:""});case 3:return e.next=5,a.getNFT();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(f.a)(Object(m.default)(a),"onRegistryAddressValueChange",function(){var e=Object(o.default)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.value,e.next=3,a.setState({registry:n,nft:null,nftError:""});case 3:return e.next=5,a.getNFT();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(f.a)(Object(m.default)(a),"getNFT",Object(o.default)(r.a.mark(function e(){var t,n,o,l,i,c,s,u;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.tinlake,n=a.state.registry,!((o=a.state.tokenId)&&o.length>0)){e.next=14;break}return e.next=6,Object(j.e)(n,t,o);case 6:if(l=e.sent,c=(i=l).tokenId,s=i.nft,u=i.errorMessage,c===o){e.next=10;break}return e.abrupt("return");case 10:if(!u){e.next=13;break}return a.setState({nftError:u}),e.abrupt("return");case 13:s&&a.setState({nft:s});case 14:case"end":return e.stop()}},e)}))),Object(f.a)(Object(m.default)(a),"issueLoan",Object(o.default)(r.a.mark(function e(){var t,n,o,l,i,c,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.tinlake,o=t.loadUserProxies,l=a.state.tokenId,a.setState({is:"loading"}),e.prev=3,e.next=6,Object(w.a)();case 6:return i=a.state.registry,e.next=9,Object(j.f)(n,l,i);case 9:if(!(c=e.sent).errorMsg){e.next=13;break}return a.setState({is:"error",errorMsg:c.errorMsg}),e.abrupt("return");case 13:s=c.data,a.setState({loanId:s}),a.setState({is:"success"}),o&&o(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),a.setState({is:"error",errorMsg:e.t0.message});case 22:case"end":return e.stop()}},e,null,[[3,19]])}))),a}return Object(u.default)(t,e),Object(i.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tokenId,a=e.registry;this.setState({tokenId:t||"",registry:a||""})}},{key:"componentDidMount",value:function(){this.getNFT()}},{key:"render",value:function(){var e=this.state,t=e.tokenId,a=e.registry,n=e.is,r=e.nft,o=e.errorMsg,l=e.nftError,i=e.loanId,c=this.props,s=c.tinlake;c.auth;return d.createElement(b.a,null,"loading"===n?d.createElement(x.a,{height:"calc(100vh - 89px - 84px)",message:"Initiating the opening loan process. Please confirm the pending transactions in MetaMask, and do not leave this page until all transactions have been confirmed."}):d.createElement(b.a,null,d.createElement(b.a,null,"error"===n&&d.createElement(E.a,{type:"error"},d.createElement(g.a,{weight:"bold"},"Error opening loan for Token ID ",t,", see console for details"),o&&d.createElement("div",null,d.createElement("br",null),o)),"success"!==n&&d.createElement(b.a,{direction:"row",gap:"medium",margin:{top:"medium"}},d.createElement("b",null,"Please paste your Token ID and corresponding registry address below to open a loan:"))),"success"!==n&&d.createElement(b.a,null,d.createElement(b.a,{direction:"row",gap:"medium",margin:{bottom:"medium",top:"large"}},d.createElement(b.a,{basis:"1/3",gap:"medium"},d.createElement(h.a,{label:"Collateral Token Registry Address"},d.createElement(v.a,{value:a||"",onChange:this.onRegistryAddressValueChange,disabled:"success"===n}))),d.createElement(b.a,{basis:"1/3",gap:"medium"},d.createElement(h.a,{label:"Token ID"},d.createElement(v.a,{value:t,onChange:this.onTokenIdValueChange,disabled:"success"===n}))),d.createElement(b.a,{basis:"1/3",gap:"medium",align:"end"},d.createElement(y.a,{onClick:this.issueLoan,primary:!0,label:"Open loan",disabled:"loading"===n||"success"===n||!r})))),i?d.createElement(b.a,{margin:{bottom:"medium",top:"large"}}," ",d.createElement(I.a,{tinlake:s,loanId:i})):d.createElement(b.a,null,l&&d.createElement(E.a,{type:"error",margin:{vertical:"large"}},l," "),r&&d.createElement(O.a,{data:r,authedAddr:s.ethConfig.from}))))}}]),t}(d.Component),L=Object(k.b)(function(e){return e},{loadUserProxies:T.d})(M),S=a("ACV0"),P=a("Gb8u"),A=a("xJFt"),C=a("vnk9"),D=a("8kid"),R=a("wZwN"),F=function(e){function t(){return Object(l.default)(this,t),Object(c.default)(this,Object(s.default)(t).apply(this,arguments))}return Object(u.default)(t,e),Object(i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.tokenId,a=e.registry;return d.createElement(b.a,{align:"center",pad:{horizontal:"small"}},d.createElement(P.a,{selectedRoute:"/loans/issue",menuItems:C.a}),d.createElement(b.a,{justify:"center",direction:"row"},d.createElement(b.a,{width:"xlarge"},d.createElement(p.a,{render:function(e){return d.createElement(R.a,{tinlake:e,waitForAuthentication:!0,waitForAuthorization:!0,render:function(n){return n&&"loaded"===n.state&&n.user?d.createElement(b.a,null,d.createElement(A.a,null,d.createElement(b.a,{direction:"row",gap:"small",align:"center"},d.createElement(D.a,{href:"/loans"}),d.createElement(S.a,{level:"3"},"Open Loan"))),d.createElement(L,{tinlake:e,auth:n,tokenId:t,registry:a})):d.createElement(E.a,{margin:"medium",type:"error"},"Please authenticate to access this page")}})}}))))}}],[{key:"getInitialProps",value:function(){var e=Object(o.default)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.query,e.abrupt("return",{tokenId:a.tokenId,registry:a.registry});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(d.Component);t.default=F},Ks3v:function(e,t,a){"use strict";a.d(t,"a",function(){return w});var n=a("q1tI"),r=a.n(n),o=a("vOnD"),l=a("bkVA"),i=a("otPn"),c=a("463D"),s=a("XDYV"),u=a("shMu");function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var m={theme:{global:{colors:{icon:"#666666"}},icon:{size:{small:"12px",medium:"24px",large:"48px",xlarge:"96px"}}}},f=function(e,t,a,n){return Object(o.css)(["",":",";"],e,function e(t,a){var n=a.global.colors[t]||t,r=n;return a.dark&&n.dark?r=n.dark:!a.dark&&n.light&&(r=n.light),r&&a.global.colors[r]&&a.global.colors[r]!==r&&(r=e(r,a)),r}(t,a))};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var g=Object(o.css)([""," ",' g{fill:inherit;stroke:inherit;}*:not([stroke]){&[fill="none"]{stroke-width:0;}}*[stroke*="#"],*[STROKE*="#"]{stroke:inherit;fill:none;}*[fill-rule],*[FILL-RULE],*[fill*="#"],*[FILL*="#"]{fill:inherit;stroke:none;}'],function(e){return f("fill",e.color||e.theme.global.colors.icon,e.theme)},function(e){return f("stroke",e.color||e.theme.global.colors.icon,e.theme)}),h=function(e){var t=e.a11yTitle,a=(e.color,e.size,e.theme,function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["a11yTitle","color","size","theme"]));return r.a.createElement("svg",b({"aria-label":t},a))};h.displayName="Icon";var v=Object(o.default)(h).withConfig({displayName:"StyledIcon",componentId:"ofa7kd-0"})(["display:inline-block;flex:0 0 auto;"," "," ",""],function(e){var t=e.size,a=void 0===t?"medium":t,n=e.theme;return"\n    width: "+(n.icon.size[a]||a)+";\n    height: "+(n.icon.size[a]||a)+";\n  "},function(e){return"plain"!==e.color&&g},function(e){var t=e.theme;return t&&t.icon.extend});function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}v.defaultProps={},Object.setPrototypeOf(v.defaultProps,m);var E=Object(o.default)(i.a).withConfig({displayName:"DisplayField__DisplayFieldBox",componentId:"lfek92-0"})(["&{padding:2px 0px;.display_field_text{overflow:hidden;display:block;white-space:nowrap;text-overflow:ellipsis;}.display_field_text:after{content:'';display:inline-block;}a,a:hover{text-decoration:none;}a.display_field_anchor{overflow:hidden;}a.icon_anchor{svg{vertical-align:middle;}}}",""],function(e){return e.theme.displayField&&e.theme.displayField.extend}),O=Object(o.default)(i.a).withConfig({displayName:"DisplayField__LabelBox",componentId:"lfek92-1"})([""]),k=function(e){var t=e.value,a=e.valueToCopy,n=e.link,o=e.label,l=e.as,d=void 0===l?"p":l,m=e.copy,f=e.theme.displayField,b=f.labelBox,g=f.labelText,h=f.anchor,v=f.icons;return r.a.createElement(E,null,r.a.createElement(function(e){var t=e.label,a=e.children;return t?r.a.createElement(O,b,r.a.createElement(s.a,p({},g,{as:"label"}),t),a):a},{label:o},r.a.createElement(function(e){var n=e.children;return m?r.a.createElement(i.a,{direction:"row",align:"center",gap:"xsmall"},n,r.a.createElement(c.a,{className:"icon_anchor",onClick:function(){Object(u.a)(a||t)},title:"Copy to clipboard"},r.a.createElement(v.copy,{size:v.size}))):n},null,r.a.createElement(function(e){var t=e.link,a=e.children;return t?r.a.createElement(c.a,p({className:"display_field_anchor"},h,"string"==typeof t?{href:t}:t),a):a},{link:n},r.a.createElement(s.a,{as:d,className:"display_field_text"},t)))))},j={displayField:{labelBox:{border:{side:"bottom",color:"light-4"}},anchor:{color:"brand"},icons:{copy:function(e){return r.a.createElement(v,y({viewBox:"0 0 24 24",a11yTitle:"Copy"},e),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M9,15 L17,15 L9,15 Z M9,11 L19,11 L9,11 Z M9,7 L13,7 L9,7 Z M16,1 L16,7 L22,7 M6,5 L2,5 L2,23 L18,23 L18,19 M22,19 L6,19 L6,1 L17,1 L22,6 L22,19 L22,19 Z"}))},size:"small"}}};Object(l.extendDefaultTheme)(j),k.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){d(e,t,a[t])})}return e}({},l.defaultProps);var w=Object(o.withTheme)(k)},YwDK:function(e,t,a){"use strict";var n=a("rt45"),r=a("0iUn"),o=a("sLSF"),l=a("MI3g"),i=a("a7VT"),c=a("Tit0"),s=a("q1tI"),u=a("ACV0"),d=a("otPn"),p=a("vOnD"),m=a("Bodc"),f=a("Ks3v"),b=a("H/fR"),g=a("1OXE");function h(){var e=Object(n.a)(["\n  margin: 56px 0;\n  padding: 20px;\n  border-radius: 3px;\n  background: #f7f7f7;\n"]);return h=function(){return e},e}var v=function(e){function t(){return Object(r.default)(this,t),Object(l.default)(this,Object(i.default)(t).apply(this,arguments))}return Object(c.default)(t,e),Object(o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=t.registry,n=t.tokenId,r=t.nftOwner,o=e.authedAddr;return s.createElement(y,null,s.createElement(u.a,{level:"5",margin:"none"},"NFT Data"),s.createElement(d.a,{direction:"row",gap:"medium",margin:{bottom:"large",top:"medium"}},s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT ID",copy:!0,as:"span",value:Object(b.c)(Object(g.b)(n).toString()),link:{href:Object(b.b)(Object(b.c)(Object(g.b)(n).toString()),a),target:"_blank"}})),s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT registry",copy:!0,as:"span",value:a,link:{href:Object(b.a)(a),target:"_blank"}})),s.createElement(d.a,{basis:"1/3",gap:"medium"},s.createElement(f.a,{label:"NFT Owner",copy:!0,as:"span",value:r,link:{href:Object(b.a)(r),target:"_blank"}}),o===r&&s.createElement(m.a,{text:"Me",style:{position:"absolute",left:100,top:32}}))),s.createElement(d.a,{direction:"row",gap:"medium",margin:{bottom:"small",top:"medium"}}))}}]),t}(s.Component);t.a=v;var y=Object(p.default)(d.a)(h())},ZryU:function(e,t,a){"use strict";var n=a("0iUn"),r=a("sLSF"),o=a("MI3g"),l=a("a7VT"),i=a("Tit0"),c=a("q1tI"),s=a("xy4l"),u=a("otPn"),d=a("ACV0"),p=a("/MKj"),m=a("5vTU"),f=a("IIBO"),b=a("P3Am"),g=a("1OXE"),h=a("hGzJ"),v=a("gTk/"),y=a("J2ZV"),E=function(e){function t(){return Object(n.default)(this,t),Object(o.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(i.default)(t,e),Object(r.default)(t,[{key:"render",value:function(){var e=this.props.loan,t=e.loanId,a=e.debt,n=e.principal,r=e.interestRate,o=e.status;return c.createElement(u.a,null,c.createElement(u.a,{direction:"row",gap:"medium"},c.createElement(f.a,{label:"Loan ID"},c.createElement(b.a,{value:t,disabled:!0})),c.createElement(f.a,{label:"Status"},c.createElement(b.a,{value:o,disabled:!0}))),c.createElement(u.a,{direction:"row",gap:"medium",margin:{bottom:"medium",top:"large"}},c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Maximum borrow amount"},c.createElement(v.a,{value:n.toString(),tokenData:y,precision:12}))),c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Debt"},c.createElement(v.a,{value:a.toString(),tokenData:y,precision:12}))),c.createElement(u.a,{basis:"1/3",gap:"medium"},c.createElement(f.a,{label:"Interest rate"},c.createElement(h.a,{value:Object(g.e)(r),suffix:"%",disabled:!0})))))}}]),t}(c.Component),O=a("ln6h"),k=a.n(O),j=a("O40h"),w=a("AT/M"),x=a("vYYK"),I=a("T1Te"),T=a("XDYV"),M=a("9UR+"),L=a("r6I4"),S=a("go9o"),P=a("+i6/"),A=a("OZ/i"),C=a.n(A),D=function(e){function t(){var e,a;Object(n.default)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=Object(o.default)(this,(e=Object(l.default)(t)).call.apply(e,[this].concat(i))),Object(x.a)(Object(w.default)(a),"borrow",Object(j.default)(k.a.mark(function e(){var t,n,r,o,l;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.transactionSubmitted&&a.props.transactionSubmitted("Borrowing initiated. Please confirm the pending transactions in MetaMask. Processing may take a few seconds."),e.prev=1,e.next=4,Object(P.a)();case 4:return t=a.state.borrowAmount,n=a.props,r=n.loan,o=n.tinlake,e.next=8,Object(M.a)(o,r,t);case 8:if(!(l=e.sent)||!l.errorMsg){e.next=12;break}return a.props.responseReceived&&a.props.responseReceived(null,"Borrowing failed. ".concat(l.errorMsg)),e.abrupt("return");case 12:a.props.responseReceived&&a.props.responseReceived("Borrowing successful. Please check your wallet.",null),a.props.loadLoan&&a.props.loadLoan(o,r.loanId),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),a.props.responseReceived&&a.props.responseReceived(null,"Borrowing failed. ".concat(e.t0)),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))),a}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.loan,a=e.tinlake,n=e.loadAnalyticsData;this.setState({borrowAmount:t.principal||"0"}),n&&n(a)}},{key:"render",value:function(){var e=this,t=this.state.borrowAmount,a=this.props,n=a.loan,r=a.analytics,o="0"!==n.principal.toString(),l=r&&r.data&&r.data.availableFunds||"0",i=new C.a(t).cmp(new C.a(n.principal))>0,s=new C.a(t).cmp(new C.a(l))>0,d=!i&&!s&&o;return c.createElement(u.a,{basis:"1/4",gap:"medium",margin:{right:"large"}},c.createElement(u.a,{gap:"medium"},c.createElement(f.a,{label:"Borrow amount"},c.createElement(h.a,{value:Object(g.a)(t,18),suffix:" DAI",precision:18,onValueChange:function(t){var a=t.value;return e.setState({borrowAmount:Object(g.d)(a,18)})}}))),c.createElement(u.a,{align:"start"},c.createElement(I.a,{onClick:this.borrow,primary:!0,label:"Borrow",disabled:!d}),s&&c.createElement(u.a,{margin:{top:"small"}},"Available funds exceeded. ",c.createElement("br",null),"Amount has to be lower then ",c.createElement("br",null),c.createElement(T.a,{weight:"bold"},"".concat(Object(g.a)(l,18)))),i&&!s&&c.createElement(u.a,{margin:{top:"small"}},"Max borrow amount exceeded.   ",c.createElement("br",null),"Amount has to be lower then ",c.createElement("br",null),c.createElement(T.a,{weight:"bold"},"".concat(Object(g.a)(n.principal,18))))))}}]),t}(c.Component),R=Object(p.b)(function(e){return e},{loadLoan:s.b,transactionSubmitted:L.d,responseReceived:L.c,loadAnalyticsData:S.b})(D),F=function(e){function t(){var e,a;Object(n.default)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return a=Object(o.default)(this,(e=Object(l.default)(t)).call.apply(e,[this].concat(i))),Object(x.a)(Object(w.default)(a),"repay",Object(j.default)(k.a.mark(function e(){var t,n,r,o,l,i,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(P.a)();case 3:return a.state.repayAmount,t=a.props,n=t.transactionSubmitted,r=t.responseReceived,o=t.loadLoan,l=t.loan,i=t.tinlake,n&&n("Repayment initiated. Please confirm the pending transactions in MetaMask. Processing may take a few seconds."),e.next=8,Object(M.h)(i,l);case 8:if(!(c=e.sent)||!c.errorMsg){e.next=12;break}return r&&r(null,"Repayment failed. ".concat(c.errorMsg)),e.abrupt("return");case 12:r&&r("Repayment successful. Please check your wallet.",null),o&&o(i,l.loanId),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),L.c&&Object(L.c)(null,"Repayment failed. ".concat(e.t0)),console.log(e.t0);case 20:case"end":return e.stop()}},e,null,[[0,16]])}))),a}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.loan;this.setState({repayAmount:e.debt||"0"})}},{key:"render",value:function(){var e=this,t=this.state.repayAmount,a="0"!==this.props.loan.debt.toString();return c.createElement(u.a,{basis:"1/4",gap:"medium",margin:{right:"large"}},c.createElement(u.a,{gap:"medium"},c.createElement(f.a,{label:"Repay amount"},c.createElement(h.a,{value:Object(g.a)(t,18),suffix:" DAI",precision:18,onValueChange:function(t){var a=t.value;return e.setState({repayAmount:Object(g.d)(a)})},disabled:!0}))),c.createElement(u.a,{align:"start"},c.createElement(I.a,{onClick:this.repay,primary:!0,label:"Repay",disabled:!a})))}}]),t}(c.Component),_=Object(p.b)(function(e){return e},{loadLoan:s.b,transactionSubmitted:L.d,responseReceived:L.c})(F),N=a("02fx"),B=a("YwDK"),U=a("2PWv"),V=function(e){function t(){return Object(n.default)(this,t),Object(o.default)(this,Object(l.default)(t).apply(this,arguments))}return Object(i.default)(t,e),Object(r.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tinlake,a=e.loanId,n=e.loadLoan,r=e.resetTransactionState,o=e.loadUserProxies;a&&n(t,a),r&&r(),o&&o()}},{key:"componentWillUnmount",value:function(){this.props.resetTransactionState&&this.props.resetTransactionState()}},{key:"render",value:function(){var e=this.props,t=e.loans,a=e.loanId,n=e.tinlake,r=e.auth,o=e.transactions,l=t,i=l.loan,s=l.loanState;if(null===s||"loading"===s)return null;if("not found"===s)return c.createElement(m.a,{margin:"medium",type:"error"},"Could not find loan ",a);var p=r&&r.user,f=(p&&p.permissions.canSetInterestRate,p&&i&&p.proxies.includes(i.ownerOf));return o&&o.transactionState&&"processing"===o.transactionState?c.createElement(N.a,{height:"calc(100vh - 89px - 84px)",message:o.loadingMessage||"Processing Transaction. This may take a few seconds. Please wait..."}):c.createElement(u.a,null,o&&o.successMessage&&c.createElement(u.a,{margin:{bottom:"large"}},c.createElement(m.a,{type:"success"},o.successMessage," ")),o&&o.errorMessage&&c.createElement(u.a,{margin:{bottom:"large"}},c.createElement(m.a,{type:"error"},o.errorMessage)),c.createElement(E,{loan:i}),i&&"closed"!==i.status&&c.createElement(u.a,null,f&&c.createElement(u.a,{margin:{top:"large",bottom:"large"}},c.createElement(u.a,{gap:"medium",align:"start",margin:{bottom:"medium"}},c.createElement(d.a,{level:"5",margin:"none"},"Borrow / Repay ")),c.createElement(u.a,{direction:"row"},c.createElement(R,{loan:i,tinlake:n}," "),c.createElement(_,{loan:i,tinlake:n}," ")))),i&&i.nft&&c.createElement(B.a,{data:i.nft,authedAddr:n.ethConfig.from}))}}]),t}(c.Component);t.a=Object(p.b)(function(e){return e},{loadLoan:s.b,resetTransactionState:L.b,loadUserProxies:U.d})(V)}},[["Dwci","5d41","9da1"]]]);