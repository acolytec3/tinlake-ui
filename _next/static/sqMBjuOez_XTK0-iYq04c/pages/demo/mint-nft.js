(window.webpackJsonp=window.webpackJsonp||[]).push([["6eb6"],{"1KDT":function(e,t,n){"use strict";n.r(t);var a=n("0iUn"),r=n("sLSF"),o=n("MI3g"),i=n("a7VT"),l=n("Tit0"),u=n("q1tI"),s=n("2+e4"),c=n("otPn"),f=n("ln6h"),p=n.n(f),d=n("O40h"),h=n("AT/M"),m=n("vYYK"),g=n("1OXE"),v=n("ACV0"),y=n("463D"),b=n("XDYV"),S=n("IIBO"),x=n("P3Am"),w=n("T1Te"),E=n("5vTU"),k=n("YFqc"),T=n.n(k),O=n("xJFt"),P=n("8kid"),I=n("+i6/"),N=n("02fx"),F=n("hGzJ"),C=n("UIRo"),D="0x1",j=function(e){function t(){var e,n;Object(a.default)(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return n=Object(o.default)(this,(e=Object(i.default)(t)).call.apply(e,[this].concat(l))),Object(m.a)(Object(h.default)(n),"state",{tokenId:n.generateTokenId(),referenceId:"",amount:"1000.00",assetType:"Invoice",is:null,errorMsg:""}),Object(m.a)(Object(h.default)(n),"mint",Object(d.default)(p.a.mark(function e(){var t,a,r,o,i,l,u,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state,a=t.referenceId,r=t.assetType,o=t.amount,i=t.tokenId,l=C.a.contractAddresses.COLLATERAL_NFT,n.setState({is:"loading"}),e.prev=3,e.next=6,Object(I.a)();case 6:return u=Object(g.d)(Object(g.a)(o,2),2),e.next=9,n.props.tinlake.mintNFT(l,n.props.tinlake.ethConfig.from,i,a,u,r);case 9:(s=e.sent).status===D&&"Transfer"===s.events[0].event.name?n.setState({is:"success"}):n.setState({is:"error"}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0),n.setState({is:"error",errorMsg:e.t0.message});case 17:case"end":return e.stop()}},e,null,[[3,13]])}))),n}return Object(l.default)(t,e),Object(r.default)(t,[{key:"generateTokenId",value:function(){for(var e="",t=0;t<32;t+=1)e+=Math.round(16*Math.random());return e}},{key:"render",value:function(){var e=this,t=this.state,n=t.is,a=t.tokenId,r=t.errorMsg,o=t.referenceId,i=t.assetType,l=t.amount,s=C.a.contractAddresses.COLLATERAL_NFT;return u.createElement(c.a,null,u.createElement(O.a,null,u.createElement(c.a,{direction:"row",gap:"small",align:"center"},u.createElement(P.a,{href:"/borrower"}),u.createElement(v.a,{level:"3"},"Mint NFT"))),"loading"===n?u.createElement(N.a,{height:"calc(100vh - 89px - 84px)",message:"Minting..."}):u.createElement(c.a,null,"success"===n&&u.createElement(E.a,{pad:{horizontal:"medium"},type:"success"},"Successfully minted NFT for Token ID ",a,u.createElement("p",null,u.createElement(T.a,{href:{pathname:"/loans/issue",query:{tokenId:a,registry:s}}},u.createElement(y.a,null,"Please proceed to loan opening"))," your NFT."),u.createElement("p",null," Your NFT ID will automatically be pasted in the respective field."),u.createElement("p",null,"If you want to open a loan, ",u.createElement("b",null,"please make sure to copy your Token ID!"))),"error"===n&&u.createElement(E.a,{pad:{horizontal:"medium"},type:"error"},u.createElement(b.a,{weight:"bold"},"Error minting NFT for Token ID ",a,", see console for details"),r&&u.createElement("div",null,u.createElement("br",null),r)),null===n&&u.createElement(E.a,{pad:{horizontal:"medium"},type:"info"},'Tinlake requires you to have a non-fungible token ("NFT") to deposit as collateral. An NFT is an on-chain, digital representation of an underlying real-world asset, such as an invoice, a mortgage or music royalties.',u.createElement("p",null,'In this demo, you can mint a test NFT reflecting an sample invoice worth USD 1.000 into your wallet. Please fill in a "NFT Reference" as a unique identifier for your invoice NFT below. Then proceed with Mint NFT. The NFT will be minted into your wallet and on the next screen you will be provided with the Token ID of this NFT.'),u.createElement("b",null,"Please store or copy this Token ID, as it will be used again to open a loan on Tinlake."),u.createElement("p",null,"If you already have a token ID, ",u.createElement(T.a,{href:"/loans/issue"},u.createElement(y.a,null,"please proceed to loan opening")),".")),u.createElement(c.a,{direction:"row",gap:"large",margin:{vertical:"large"}},u.createElement("b",null,"Please specify metadata of NFT:")),u.createElement(c.a,{direction:"row",gap:"large",justify:"evenly"},"success"===n&&u.createElement(S.a,{label:"Token ID"},u.createElement(x.a,{value:this.state.tokenId,disabled:!0})),u.createElement(S.a,{label:"NFT Reference"},u.createElement(x.a,{value:o,onChange:function(t){return e.setState({referenceId:t.currentTarget.value})},disabled:"success"===n})),u.createElement(S.a,{label:"Asset Type"},u.createElement(x.a,{value:i,disabled:!0})),u.createElement(S.a,{label:"Invoice Amount"},u.createElement(F.a,{suffix:" USD",value:l,disabled:!0})),u.createElement(w.a,{primary:!0,onClick:this.mint,label:"Mint NFT",disabled:"loading"===n||"success"===n}))))}}]),t}(u.Component),A=n("Gb8u"),V=n("vnk9"),M=function(e){function t(){return Object(a.default)(this,t),Object(o.default)(this,Object(i.default)(t).apply(this,arguments))}return Object(l.default)(t,e),Object(r.default)(t,[{key:"render",value:function(){return u.createElement(c.a,{align:"center",pad:{horizontal:"small"}},u.createElement(A.a,{selectedRoute:"/demo/mint-nft",menuItems:V.a}),u.createElement(c.a,{justify:"center",direction:"row"},u.createElement(c.a,{width:"xlarge"},u.createElement(s.a,{render:function(e){return u.createElement(j,{tinlake:e})}}))))}}]),t}(u.Component);t.default=M},"5Ptj":function(e,t,n){"use strict";function a(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="-"===e[0],a=n&&t,r=(e=e.replace("-","")).split(".");return{beforeDecimal:r[0],afterDecimal:r[1]||"",hasNagation:n,addNegation:a}}function o(e,t,n){for(var a="",r=n?"0":"",o=0;o<=t-1;o++)a+=e[o]||r;return a}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")},t.getThousandsGroupRegex=a,t.applyThousandSeparator=function(e,t,n){var r=a(n),o=e.search(/[1-9]/);return e.substring(0,o)+e.substring(o,e.length).replace(r,"$1"+t)},t.splitDecimal=r,t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),a=n[0].replace(/^0+/,"")||"0",r=n[1]||"";return"".concat(t?"-":"").concat(a).concat(r?".".concat(r):"")},t.limitToScale=o,t.roundToPrecision=function(e,t,n){if(-1!==["","-"].indexOf(e))return e;var a=-1!==e.indexOf(".")&&t,i=r(e),l=i.beforeDecimal,u=i.afterDecimal,s=i.hasNagation,c=parseFloat("0.".concat(u||"0")).toFixed(t).split("."),f=l.split("").reverse().reduce(function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},c[0]),p=o(c[1]||"",Math.min(t,u.length),n),d=a?".":"";return"".concat(s?"-":"").concat(f).concat(d).concat(p)},t.omit=function(e,t){var n={};return Object.keys(e).forEach(function(a){t[a]||(n[a]=e[a])}),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}},t.findChangedIndex=function(e,t){var n=0,a=0,r=e.length,o=t.length;for(;e[n]===t[n]&&n<r;)n++;for(;e[r-1-a]===t[o-1-a]&&o-a>n&&r-a>n;)a++;return{start:n,end:r-a}},t.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},t.getCurrentCaretPosition=function(e){return Math.max(e.selectionStart,e.selectionEnd)}},"8kid":function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("jCe7");function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var l=function(e){return r.a.createElement(o.a,i({viewBox:"0 0 24 24",a11yTitle:"LinkPrevious"},e),r.a.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M2,12 L22,12 M13,3 L22,12 L13,21",transform:"matrix(-1 0 0 1 24 0)"}))},u=n("YFqc"),s=n.n(u);n.d(t,"a",function(){return c});var c=function(e){return r.a.createElement(s.a,{href:e.href},r.a.createElement(l,{style:{cursor:"pointer"}}))}},c1Ww:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo/mint-nft",function(){var e=n("1KDT");return{page:e.default||e}}])},hGzJ:function(e,t,n){"use strict";var a=n("kOwS"),r=n("qNsG"),o=n("q1tI"),i=n.n(o),l=n("mDiV"),u=n.n(l),s=n("P3Am"),c=function(e){var t=e.value,n=e.precision,o=e.prefix,l=e.suffix,c=e.onValueChange,f=Object(r.a)(e,["value","precision","prefix","suffix","onValueChange"]);return i.a.createElement(u.a,Object(a.a)({thousandSeparator:",",decimalScale:n,fixedDecimalScale:!0,allowNegative:!1,prefix:o,suffix:l,customInput:s.a,value:t,onValueChange:c},f))};c.defaultProps={value:"0",precision:2,prefix:"",suffix:""},t.a=c},mDiV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("17x9")),r=i(n("q1tI")),o=n("5Ptj");function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var d={thousandSeparator:a.default.oneOfType([a.default.string,a.default.oneOf([!0])]),decimalSeparator:a.default.string,thousandsGroupStyle:a.default.oneOf(["thousand","lakh","wan"]),decimalScale:a.default.number,fixedDecimalScale:a.default.bool,displayType:a.default.oneOf(["input","text"]),prefix:a.default.string,suffix:a.default.string,format:a.default.oneOfType([a.default.string,a.default.func]),removeFormatting:a.default.func,mask:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string)]),value:a.default.oneOfType([a.default.number,a.default.string]),defaultValue:a.default.oneOfType([a.default.number,a.default.string]),isNumericString:a.default.bool,customInput:a.default.elementType,allowNegative:a.default.bool,allowEmptyFormatting:a.default.bool,onValueChange:a.default.func,onKeyDown:a.default.func,onMouseUp:a.default.func,onChange:a.default.func,onFocus:a.default.func,onBlur:a.default.func,type:a.default.oneOf(["text","tel","password"]),isAllowed:a.default.func,renderText:a.default.func,getInputRef:a.default.func},h={displayType:"input",decimalSeparator:".",thousandsGroupStyle:"thousand",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,allowEmptyFormatting:!1,isNumericString:!1,type:"text",onValueChange:o.noop,onChange:o.noop,onKeyDown:o.noop,onMouseUp:o.noop,onFocus:o.noop,onBlur:o.noop,isAllowed:o.returnTrue,getInputRef:o.noop},m=function(e){function t(e){var n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=!(r=c(t).call(this,e))||"object"!==l(r)&&"function"!=typeof r?p(a):r;var o=e.defaultValue;n.validateProps();var i=n.formatValueProp(o);return n.state={value:i,numAsString:n.removeFormatting(i)},n.selectionBeforeInput={selectionStart:0,selectionEnd:0},n.onChange=n.onChange.bind(p(p(n))),n.onKeyDown=n.onKeyDown.bind(p(p(n))),n.onMouseUp=n.onMouseUp.bind(p(p(n))),n.onFocus=n.onFocus.bind(p(p(n))),n.onBlur=n.onBlur.bind(p(p(n))),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,r.default.Component),n=t,(a=[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state,a=this.focusedElm,r=n.value,o=n.numAsString,i=void 0===o?"":o;if(e!==t){this.validateProps();var l=this.formatNumString(i),u=void 0===t.value?l:this.formatValueProp(),s=this.removeFormatting(u),c=parseFloat(s),f=parseFloat(i);(isNaN(c)&&isNaN(f)||c===f)&&l===r&&(null!==a||u===r)||this.updateValue({formattedValue:u,numAsString:s,input:a})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.decimalScale,n=this.getSeparators().decimalSeparator,a=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-","")),n&&0===t&&(e=e.split(n)[0]);var i=(e=(e.match(a)||[]).join("").replace(n,".")).indexOf(".");return-1!==i&&(e="".concat(e.substring(0,i),".").concat(e.substring(i+1,e.length).replace(new RegExp((0,o.escapeRegExp)(n),"g"),""))),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,a=n.format,r=n.decimalScale,i=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!i||0===r||t||a?"":"|"+(0,o.escapeRegExp)(i)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props.decimalSeparator,t=this.props.thousandSeparator;return!0===t&&(t=","),{decimalSeparator:e,thousandSeparator:t}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"==typeof n?n:n[e]||" "}},{key:"getValueObject",value:function(e,t){var n=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(n)?void 0:n}}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,a=t.thousandSeparator;if(n===a)throw new Error("\n          Decimal separator can't be same as thousand separator.\n          thousandSeparator: ".concat(a,' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: ').concat(n," (default value for decimalSeparator is .)\n       "));if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask ".concat(e," should not contain numeric character;\n        "))}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,o.setCaretPosition)(e,t),setTimeout(function(){e.value===n&&(0,o.setCaretPosition)(e,t)},0)}},{key:"correctCaretPosition",value:function(e,t,n){var a=this.props,r=a.prefix,i=a.suffix,l=a.format;if(""===e)return 0;if(t=(0,o.clamp)(t,0,e.length),!l){var u="-"===e[0];return(0,o.clamp)(t,r.length+(u?1:0),e.length-i.length)}if("function"==typeof l)return t;if("#"===l[t]&&(0,o.charIsNumber)(e[t]))return t;if("#"===l[t-1]&&(0,o.charIsNumber)(e[t-1]))return t;var s=l.indexOf("#"),c=l.lastIndexOf("#");t=(0,o.clamp)(t,s,c+1);for(var f=l.substring(t,l.length).indexOf("#"),p=t,d=t+(-1===f?0:f);p>s&&("#"!==l[p]||!(0,o.charIsNumber)(e[p]));)p-=1;return!(0,o.charIsNumber)(e[d])||"left"===n&&t!==s||t-p<d-t?(0,o.charIsNumber)(e[p])?p+1:p:d}},{key:"getCaretPosition",value:function(e,t,n){var a,r,o=this.props.format,i=this.state.value,l=this.getNumberRegex(!0),u=(e.match(l)||[]).join(""),s=(t.match(l)||[]).join("");for(a=0,r=0;r<n;r++){var c=e[r]||"",f=t[a]||"";if((c.match(l)||c===f)&&("0"!==c||!f.match(l)||"0"===f||u.length===s.length)){for(;c!==t[a]&&a<t.length;)a++;a++}}return"string"!=typeof o||i||(a=t.length),a=this.correctCaretPosition(t,a)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,a=t.prefix,r=t.suffix;if(!n&&e){var o="-"===e[0];o&&(e=e.substring(1,e.length));var i=(e=a&&0===e.indexOf(a)?e.substring(a.length,e.length):e).lastIndexOf(r);e=r&&-1!==i&&i===e.length-r.length?e.substring(0,i):e,o&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter(function(e){return""!==e}),n=0,a="",r=0,o=t.length;r<=o;r++){var i=t[r]||"",l=r===o?e.length:e.indexOf(i,n);if(-1===l){a=e;break}a+=e.substring(n,l),n=l+i.length}return(a.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,a=t.removeFormatting;return e?(n?e="string"==typeof n?this.removePatternFormatting(e):"function"==typeof a?a(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,a=t.split(""),r=0,o=t.length;r<o;r++)"#"===t[r]&&(a[r]=e[n]||this.getMaskAtIndex(n),n+=1);return a.join("")}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,a=t.fixedDecimalScale,r=t.prefix,i=t.suffix,l=t.allowNegative,u=t.thousandsGroupStyle,s=this.getSeparators(),c=s.thousandSeparator,f=s.decimalSeparator,p=-1!==e.indexOf(".")||n&&a,d=(0,o.splitDecimal)(e,l),h=d.beforeDecimal,m=d.afterDecimal,g=d.addNegation;return void 0!==n&&(m=(0,o.limitToScale)(m,n,a)),c&&(h=(0,o.applyThousandSeparator)(h,c,u)),r&&(h=r+h),i&&(m+=i),g&&(h="-"+h),e=h+(p&&f||"")+m}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props,n=t.format,a=t.allowEmptyFormatting,r=e;return r=""!==e||a?"-"!==e||n?"string"==typeof n?this.formatWithPattern(r):"function"==typeof n?n(r):this.formatAsNumber(r):"-":""}},{key:"formatValueProp",value:function(e){var t=this.props,n=t.format,a=t.decimalScale,r=t.fixedDecimalScale,i=t.allowEmptyFormatting,l=this.props,u=l.value,s=void 0===u?e:u,c=l.isNumericString,f=!s&&0!==s;return f&&i&&(s=""),f&&!i?"":("number"==typeof s&&(s=s.toString(),c=!0),"Infinity"===s&&c&&(s=""),c&&!n&&"number"==typeof a&&(s=(0,o.roundToPrecision)(s,a,r)),c?this.formatNumString(s):this.formatInput(s))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),a=new RegExp("(-)(.)*(-)"),r=n.test(e),o=a.test(e);return e=e.replace(/-/g,""),r&&!o&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.removePrefixAndSuffix(e),e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,a=n.format,r=n.prefix,o=n.suffix,i=n.decimalScale,l=n.fixedDecimalScale,u=this.getSeparators().decimalSeparator;return"string"==typeof a&&"#"!==a[e]||!(a||!(e<r.length||e>=t.length-o.length||i&&l&&t[e]===u))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var a=e;a<t;a++)if(this.isCharacterAFormat(a,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var a=this.props,r=a.format,i=a.allowNegative,l=a.prefix,u=a.suffix,s=this.getSeparators().decimalSeparator,c=this.state.numAsString||"",f=this.selectionBeforeInput,p=f.selectionStart,d=f.selectionEnd,h=(0,o.findChangedIndex)(t,n),m=h.start,g=h.end;if(!r&&"."!==s&&m===g&&"."===n[p])return n.substr(0,p)+s+n.substr(p+1,n.length);var v=r?0:l.length,y=t.length-(r?0:u.length);if(n.length>t.length||!n.length||m===g||0===p&&d===t.length||p===v&&d===y)return n;if(this.checkIfFormatGotDeleted(m,g,t)&&(n=t),!r){var b=this.removeFormatting(n),S=(0,o.splitDecimal)(b,i),x=S.beforeDecimal,w=S.afterDecimal,E=S.addNegation,k=e<n.indexOf(s)+1;if(b.length<c.length&&k&&""===x&&!parseFloat(w))return E?"-":""}return n}},{key:"updateValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.noop,a=e.formattedValue,r=e.input,i=e.numAsString,l=e.caretPos,u=this.props.onValueChange,s=this.state.value;if(r){if(!l){var c=e.inputValue||r.value,f=(0,o.getCurrentCaretPosition)(r);l=this.getCaretPosition(c,a,f)}r.value=a,this.setPatchedCaretPosition(r,l,a)}void 0===i&&(i=this.removeFormatting(a)),a!==s?this.setState({value:a,numAsString:i},function(){u(t.getValueObject(a,i)),n()}):n()}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,a=this.state,r=this.props,i=r.isAllowed,l=a.value||"",u=(0,o.getCurrentCaretPosition)(t);n=this.correctInputValue(u,l,n);var s=this.formatInput(n)||"",c=this.removeFormatting(s);i(this.getValueObject(s,c))||(s=l),this.updateValue({formattedValue:s,numAsString:c,inputValue:n,input:t},function(){r.onChange(e)})}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,a=t.format,r=t.onBlur,i=n.numAsString,l=n.value;if(this.focusedElm=null,!a){i=(0,o.fixLeadingZero)(i);var u=this.formatNumString(i);if(u!==l)return e.persist(),void this.updateValue({formattedValue:u,numAsString:i},function(){r(e)})}r(e)}},{key:"onKeyDown",value:function(e){var t,n=e.target,a=e.key,r=n.selectionStart,o=n.selectionEnd,i=n.value,l=void 0===i?"":i,u=this.props,s=u.decimalScale,c=u.fixedDecimalScale,f=u.prefix,p=u.suffix,d=u.format,h=u.onKeyDown,m=(u.onValueChange,void 0!==s&&c),g=this.getNumberRegex(!1,m),v=new RegExp("-"),y="string"==typeof d;if(this.selectionBeforeInput={selectionStart:r,selectionEnd:o},"ArrowLeft"===a||"Backspace"===a?t=r-1:"ArrowRight"===a?t=r+1:"Delete"===a&&(t=r),void 0!==t&&r===o){var b=t,S=y?d.indexOf("#"):f.length,x=y?d.lastIndexOf("#")+1:l.length-p.length;if("ArrowLeft"===a||"ArrowRight"===a){var w="ArrowLeft"===a?"left":"right";b=this.correctCaretPosition(l,t,w)}else if("Delete"!==a||g.test(l[t])||v.test(l[t])){if("Backspace"===a&&!g.test(l[t]))if(r<=S+1&&"-"===l[0]&&void 0===d){var E=l.substring(1);e.persist(),this.updateValue({formattedValue:E,caretPos:b,input:n})}else if(!v.test(l[t])){for(;!g.test(l[b-1])&&b>S;)b--;b=this.correctCaretPosition(l,b,"left")}}else for(;!g.test(l[b])&&b<x;)b++;(b!==t||t<S||t>x)&&(e.preventDefault(),this.setPatchedCaretPosition(n,b,l)),e.isUnitTestRun&&this.setPatchedCaretPosition(n,b,l),this.props.onKeyDown(e)}else h(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,a=t.selectionEnd,r=t.value,o=void 0===r?"":r;if(n===a){var i=this.correctCaretPosition(o,n);i!==n&&this.setPatchedCaretPosition(t,i,o)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),this.focusedElm=e.target,setTimeout(function(){var n=e.target,a=n.selectionStart,r=n.selectionEnd,o=n.value,i=void 0===o?"":o,l=t.correctCaretPosition(i,a);l===a||0===a&&r===i.length||t.setPatchedCaretPosition(n,l,i),t.props.onFocus(e)},0)}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,a=e.customInput,i=e.renderText,l=e.getInputRef,s=this.state.value,c=(0,o.omit)(this.props,d),f=u({},c,{type:t,value:s,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return i?i(s)||null:r.default.createElement("span",u({},c,{ref:l}),s);if(a){var p=a;return r.default.createElement(p,f)}return r.default.createElement("input",u({},f,{ref:l}))}}])&&s(n.prototype,a),i&&s(n,i),t}();m.propTypes=d,m.defaultProps=h;var g=m;t.default=g,e.exports=t.default}},[["c1Ww","5d41","9da1"]]]);